---
title: Workflow R+blogdown+Hugo
author: "Gilles"
date: 2025-11-30
slug: workflow-rmd-hugo
categories: ["R"]
tags: ["init", "test"]
output: blogdown::html_page
---

```{r setup, include=FALSE}
slug <- tools::file_path_sans_ext(basename(knitr::current_input()))
img_dir <- file.path(dirname(knitr::current_input()), "images")
dir.create(img_dir, recursive = TRUE, showWarnings = FALSE)
knitr::opts_chunk$set(
	message = FALSE,
	warning = FALSE,
	echo = FALSE,
  fig.path = paste0(img_dir, "/"),
  fig.align = "center",
  fig.width = 10,
  fig.height = 8,
  dev = "png",
  dpi = 96
)
```

**Dernière MAJ du post :** `r format(Sys.Date(), format = "%d-%b-%Y")`

## Principe

render / pre-build site en local avec `blogdown`, lancer `hugo -D` pour *construire* le répertoire `public`. Ce dernier est utilisé pour déployer le site sur [netlify](https://www.netlify.com/).

## Avantage

Déploiement rapide, ne nécessite pas d'installer R et ses packages durant le *CI* pour construire le site.

## Inconvénients

+ Nécessite de render en local (avec le script `_build.R`)
+ Gérer le *pitfall* des figures générées dans les *bundles* Hugo :
  + chaque post doit contenir un répertoire images
  + chaque fichier index.Rmd doit contenir un paragraphe de paramétrage

```{r, eval=FALSE, echo=TRUE}
slug <- tools::file_path_sans_ext(basename(knitr::current_input()))
img_dir <- file.path(dirname(knitr::current_input()), "images")
dir.create(img_dir, recursive = TRUE, showWarnings = FALSE)
knitr::opts_chunk$set(
	message = FALSE,
	warning = FALSE,
	echo = FALSE,
  fig.path = paste0(img_dir, "/"),
  fig.align = "center",
  fig.width = 10,
  fig.height = 8,
  dev = "png",
  dpi = 96
)
```
